<div class="page__comments">
  <h4 class="page__comments-title">Comments</h4>
  <div id="comments">
    <div class="js-comments">
      <!-- Existing comments would be loaded here -->
    </div>
    
    <!-- Comment form -->
    <h4 class="page__comments-title">Leave a Comment</h4>
    <p class="small">Your email address will not be published. Required fields are marked <span class="required">*</span></p>
    <form id="new_comment" class="page__comments-form js-form form" method="post">
      <div class="form__spinner">
        <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
        <span class="sr-only">Loading...</span>
      </div>

      <fieldset>
        <label for="comment-form-message">Comment <small class="required">*</small></label>
        <textarea type="text" rows="3" id="comment-form-message" name="fields[message]" tabindex="1" required></textarea>
        <div class="small help-block"><a href="https://daringfireball.net/projects/markdown/">Markdown is supported.</a></div>
      </fieldset>
      <fieldset>
        <label for="comment-form-name">Name <small class="required">*</small></label>
        <input type="text" id="comment-form-name" name="fields[name]" tabindex="2" required />
      </fieldset>
      <fieldset>
        <label for="comment-form-email">Email address <small class="required">*</small></label>
        <input type="email" id="comment-form-email" name="fields[email]" tabindex="3" required />
      </fieldset>
      <fieldset>
        <label for="comment-form-url">Website (optional)</label>
        <input type="url" id="comment-form-url" name="fields[url]" tabindex="4"/>
      </fieldset>
      <fieldset class="hidden">
        <input type="hidden" name="options[slug]" value="{{ page.slug }}">
        <input type="hidden" name="fields[hidden]"/>
      </fieldset>
      <!-- Start comment form alert messaging -->
      <p class="hidden js-notice">
        <strong class="js-notice-text"></strong>
      </p>
      <!-- End comment form alert messaging -->
      <fieldset>
        <button type="submit" id="comment-form-submit" tabindex="5" class="btn btn--large">Submit Comment</button>
      </fieldset>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const commentForm = document.getElementById('new_comment');
  if (commentForm) {
    commentForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(commentForm);
      const commentData = {
        name: formData.get('fields[name]'),
        email: formData.get('fields[email]'),
        message: formData.get('fields[message]'),
        url: formData.get('fields[url]') || '',
        date: new Date().toISOString()
      };
      
      // Show success message
      alert('Thank you for your comment! In a production environment, this would be saved to the database.');
      
      // Clear the form
      commentForm.reset();
    });
  }
});
</script>